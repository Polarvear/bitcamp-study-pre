<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>현상수배</title>
</head>
<body>
<h1>현상수배</h1>
<button type="button"><a href="form.html">등록</a></button>
<button type="button" id="delete-btn">삭제</button>
<table id="x-table" border="1">
<thead>
    <tr>
        <th>이름</th>
        <th>나이</th>
        <th>성별</th>
        <th>현상금</th>
    </tr>
</thead>
<tbody>
</tbody>
</table>
<script>
    const tbodyEle = document.querySelector('#x-table tbody')

    fetch('/my/list')
      .then((response) =>{
          return response.json()
      })
      .then((peopleInfo) => {
          console.log(peopleInfo)
          for (const people of peopleInfo) {
              const info = people.split(',')
              console.log(info)
              const tr = document.createElement('tr')
              tr.innerHTML = `<td data-idx>${info[0]}</td>
                              <td>${info[1]}</td>
                              <td>${info[2]}</td>
                              <td>${info[3]}</td>
                              <img src="img[0]">
                              <button id="del-btn">삭제</button>`
              tbodyEle.appendChild(tr)
              document.querySelector('#del-btn').addEventListener('click', (e) => {
                  const target = e.target
                  const idx = target.getAttribute('data-idx')
                  console.log(typeof info)
              })
          }
      })




</script>




</body>
</html>